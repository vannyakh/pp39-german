(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-statistic-statistic"],{1662:function(t,a,e){var i=e("2d8b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("967d").default;n("2ea68c66",i,!0,{sourceMap:!1,shadowMode:!1})},"2d8b":function(t,a,e){var i=e("c86c");a=i(!1),a.push([t.i,'@charset "UTF-8";\n/**\n * è¿™é‡Œæ˜¯uni-appå†…ç½®çš„å¸¸ç”¨æ ·å¼å˜é‡\n *\n * uni-app å®˜æ–¹æ‰©å±•æ’ä»¶åŠæ’ä»¶å¸‚åœºï¼ˆhttps://ext.dcloud.net.cnï¼‰ä¸Šå¾ˆå¤šä¸‰æ–¹æ’ä»¶å‡ä½¿ç”¨äº†è¿™äº›æ ·å¼å˜é‡\n * å¦‚æžœä½ æ˜¯æ’ä»¶å¼€å‘è€…ï¼Œå»ºè®®ä½ ä½¿ç”¨scssé¢„å¤„ç†ï¼Œå¹¶åœ¨æ’ä»¶ä»£ç ä¸­ç›´æŽ¥ä½¿ç”¨è¿™äº›å˜é‡ï¼ˆæ— éœ€ import è¿™ä¸ªæ–‡ä»¶ï¼‰ï¼Œæ–¹ä¾¿ç”¨æˆ·é€šè¿‡æ­ç§¯æœ¨çš„æ–¹å¼å¼€å‘æ•´ä½“é£Žæ ¼ä¸€è‡´çš„App\n *\n */\n/**\n * å¦‚æžœä½ æ˜¯Appå¼€å‘è€…ï¼ˆæ’ä»¶ä½¿ç”¨è€…ï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡ä¿®æ”¹è¿™äº›å˜é‡æ¥å®šåˆ¶è‡ªå·±çš„æ’ä»¶ä¸»é¢˜ï¼Œå®žçŽ°è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½\n *\n * å¦‚æžœä½ çš„é¡¹ç›®åŒæ ·ä½¿ç”¨äº†scssé¢„å¤„ç†ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æŽ¥åœ¨ä½ çš„ scss ä»£ç ä¸­ä½¿ç”¨å¦‚ä¸‹å˜é‡ï¼ŒåŒæ—¶æ— éœ€ import è¿™ä¸ªæ–‡ä»¶\n */\n/* é¢œè‰²å˜é‡ */\n/* è¡Œä¸ºç›¸å…³é¢œè‰² */\n/* æ–‡å­—åŸºæœ¬é¢œè‰² */\n/* èƒŒæ™¯é¢œè‰² */\n/* è¾¹æ¡†é¢œè‰² */\n/* å°ºå¯¸å˜é‡ */\n/* æ–‡å­—å°ºå¯¸ */\n/* å›¾ç‰‡å°ºå¯¸ */\n/* Border Radius */\n/* æ°´å¹³é—´è· */\n/* åž‚ç›´é—´è· */\n/* é€æ˜Žåº¦ */\n/* æ–‡ç« åœºæ™¯ç›¸å…³ */.statistic-page[data-v-5a4e685a]{min-height:100vh;display:flex;flex-direction:column}.kline-box[data-v-5a4e685a]{flex:1;display:flex;min-height:0;overflow:hidden}.kline-iframe[data-v-5a4e685a]{width:100%;border:0;display:block}.detail-buy-section[data-v-5a4e685a]{padding-top:%?20?%}.detail-card[data-v-5a4e685a]{margin-bottom:%?20?%}.detail-row[data-v-5a4e685a]{border-bottom:1px solid;border-bottom-color:rgba(0,0,0,.05)}.detail-row[data-v-5a4e685a]:last-child{border-bottom:none}.quantity-row[data-v-5a4e685a]{padding:%?30?% 0;min-height:auto}.quantity-section[data-v-5a4e685a]{display:flex;flex-direction:column;gap:%?24?%;width:100%}.quantity-label[data-v-5a4e685a]{margin-bottom:%?8?%}.quantity-controls-row[data-v-5a4e685a]{display:flex;flex-direction:row;align-items:center;gap:%?16?%;width:100%}.quantity-input-container[data-v-5a4e685a]{display:flex;align-items:center;justify-content:center;flex:1}.quantity-btn[data-v-5a4e685a]{display:flex;align-items:center;justify-content:center;cursor:pointer}.quantity-input-wrapper[data-v-5a4e685a]{display:flex;align-items:center;justify-content:center;width:%?100?%;border-radius:%?8?%;padding:%?8?%}.quantity-input[data-v-5a4e685a]{width:100%;text-align:center;border:none;outline:none;background:transparent;padding:0}.quantity-action-btn[data-v-5a4e685a]{display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;flex:1}.quantity-action-btn[data-v-5a4e685a]:active{opacity:.7;-webkit-transform:scale(.95);transform:scale(.95)}.buy-button-container[data-v-5a4e685a]{position:-webkit-sticky;position:sticky;bottom:0;background:transparent;z-index:10}.buy-button[data-v-5a4e685a]{width:100%;cursor:pointer;transition:all .3s ease}.buy-button[data-v-5a4e685a]:active{opacity:.8;-webkit-transform:scale(.98);transform:scale(.98)}',""]),t.exports=a},"66da":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var i={appNav:e("61d0").default,uNumberBox:e("fabe").default,uIcon:e("469d").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"statistic-page",style:{background:t.theme.backgroundPrimary}},[e("app-nav",{attrs:{title:t.stock.name||"---",showRightImage:!0,rightImageUrl:"/static/imgs/fund/record.png"},on:{"right-action":function(a){arguments[0]=a=t.$handleEvent(a),t.router.push("/pages/statistic/record")}}}),e("v-uni-view",{staticClass:"padding-w-30"},[e("v-uni-view",{staticClass:"flex justify-between align-center"},[e("v-uni-view",{staticClass:"flex flex-direction"},[e("v-uni-text",{staticClass:"font-32",style:{color:t.theme.textPrimary}},[t._v(t._s(t.stock.name||"---"))])],1),e("v-uni-view",{staticClass:"text-right flex flex-direction"},[e("v-uni-text",{staticClass:"font-40 weight-bold",style:{color:t.theme.textPrimary}},[t._v(t._s(t.stock.price||"--"))]),e("v-uni-view",[e("v-uni-text",{staticClass:"font-24",style:{color:(Number(t.stock.change_pct)||0)>=0?t.theme.stockUp:t.theme.stockDown}},[t._v(" "+t._s(t.$t("statistic.dailyChange"))+": "+t._s((Number(t.stock.change_pct)||0)>=0?"+":"")+t._s(t.stock.change_pct||"0.00")+"% ")])],1)],1)],1)],1),e("v-uni-view",{staticClass:"width-100b margin-0-auto flex justify-start gap-20 padding-w-30"},t._l(t.intervals,(function(a){return e("v-uni-view",{key:a.value,staticClass:"radiu-20 padding-16",style:t.tabStyle(a),on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setInterval(a.value)}}},[e("v-uni-text",{staticClass:"font-24"},[t._v(t._s(a.label))])],1)})),1),e("v-uni-view",{staticClass:"kline-box width-100b margin-0-auto"},[e("iframe",{staticClass:"kline-iframe",attrs:{src:t.chartUrl}})]),e("v-uni-view",{staticClass:"detail-buy-section padding-w-30"},[e("v-uni-view",{staticClass:"detail-card"},[e("v-uni-view",{staticClass:"detail-row height-66 flex align-center justify-between"},[e("v-uni-text",{staticClass:"font-28",style:{color:t.theme.textSecondary}},[t._v(t._s(t.$t("statistic.name")))]),e("v-uni-text",{staticClass:"font-28 bold-font",style:{color:t.theme.textPrimary}},[t._v(t._s(t.stock.name||"---"))])],1),e("v-uni-view",{staticClass:"detail-row height-66 flex align-center justify-between"},[e("v-uni-text",{staticClass:"font-28",style:{color:t.theme.textSecondary}},[t._v(t._s(t.$t("statistic.new")))]),e("v-uni-text",{staticClass:"font-28 bold-font",style:{color:t.getPriceColor()}},[t._v(t._s(Number(t.stock.price||0).toFixed(3)))])],1),e("v-uni-view",{staticClass:"detail-row height-66 flex align-center justify-between"},[e("v-uni-text",{staticClass:"font-28",style:{color:t.theme.textSecondary}},[t._v(t._s(t.$t("statistic.balance")||"Balance"))]),e("v-uni-text",{staticClass:"font-28 bold-font",style:{color:t.theme.textPrimary}},[t._v(" "+t._s(Number(t.balance||0).toFixed(2))+" ")])],1),e("v-uni-view",{staticClass:"detail-row quantity-row"},[e("v-uni-view",{staticClass:"quantity-section"},[e("v-uni-text",{staticClass:"quantity-label font-30",style:{color:t.theme.textSecondary}},[t._v(t._s(t.$t("statistic.selectQuantity")))]),e("v-uni-view",{staticClass:"quantity-controls-row"},[e("v-uni-view",{staticClass:"quantity-action-btn",style:t.getActionButtonStyle(),on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.setHalfQuantity.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"font-24",style:{color:t.theme.textPrimary}},[t._v(t._s(t.$t("statistic.half")||"Half"))])],1),e("v-uni-view",{staticClass:"quantity-action-btn",style:t.getActionButtonStyle(),on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.setFullQuantity.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"font-24",style:{color:t.theme.textPrimary}},[t._v(t._s(t.$t("statistic.full")||"Full"))])],1),e("v-uni-view",{staticClass:"quantity-input-container"},[e("u-number-box",{attrs:{min:1,max:t.maxQuantity,step:1,disabled:!1},model:{value:t.quantity,callback:function(a){t.quantity=a},expression:"quantity"}},[e("v-uni-view",{staticClass:"quantity-btn minus-btn",style:t.getMinusStyle(),attrs:{slot:"minus"},slot:"minus"},[e("u-icon",{attrs:{name:"minus",color:t.theme.textPrimary,size:"14"}})],1),e("v-uni-view",{staticClass:"quantity-input-wrapper",style:{background:t.theme.backgroundTertiary},attrs:{slot:"input"},slot:"input"},[e("v-uni-input",{staticClass:"quantity-input font-28 bold-font",style:{color:t.theme.textPrimary},attrs:{type:"number",min:1,max:t.maxQuantity},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.handleQuantityInput.apply(void 0,arguments)}},model:{value:t.quantity,callback:function(a){t.quantity=t._n(a)},expression:"quantity"}})],1),e("v-uni-view",{staticClass:"quantity-btn plus-btn",style:t.getPlusStyle(),attrs:{slot:"plus"},slot:"plus"},[e("u-icon",{attrs:{name:"plus",color:t.theme.white,size:"14"}})],1)],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"detail-row height-66 flex align-center justify-between"},[e("v-uni-text",{staticClass:"font-28",style:{color:t.theme.textSecondary}},[t._v(t._s(t.$t("statistic.totalAmount")))]),e("v-uni-text",{staticClass:"font-28 bold-font",style:{color:t.getPriceColor()}},[t._v(" "+t._s(Number(t.totalAmount).toFixed(3))+" ")])],1)],1),e("v-uni-view",{staticClass:"buy-button-container padding-t-20 padding-b-30"},[e("v-uni-view",{staticClass:"buy-button flex align-center justify-center padding-25 radiu-30",style:{background:t.theme.primary__500,color:t.theme.white},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleBuy.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"font-32"},[t._v(t._s(t.$t("statistic.buyNow")))])],1)],1)],1)],1)},s=[]},a555:function(t,a,e){"use strict";e.r(a);var i=e("bd3a"),n=e.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=n.a},a8b5:function(t,a,e){"use strict";var i=e("1662"),n=e.n(i);n.a},bd3a:function(t,a,e){"use strict";e("6a54"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("64aa"),e("c223"),e("5c47"),e("a1c1"),e("aa9c");var i={data:function(){return{id:"",selectedInterval:"D",stock:{},chartData:[],chartUrl:"",language:"en",quantity:1,balance:0,flag:!0}},onLoad:function(t){console.log("ðŸš€ ~ onLoad ~ options:",t),t.id&&(this.id=t.id),this.language=uni.getStorageSync("language")},onShow:function(){this.getStatistic(),this.getChartData(),this.getChartUrl()},computed:{theme:function(){return this.$store.getters.theme},themeKey:function(){return this.$store.state.themeKey||"light"},intervals:function(){return[{value:"D",label:this.$t("statistic.dailyK")},{value:"W",label:this.$t("statistic.weeklyK")},{value:"M",label:this.$t("statistic.monthlyK")}]},totalAmount:function(){var t=Number(this.stock.price||0),a=Number(this.quantity||1);return t*a},maxQuantity:function(){var t=Number(this.stock.price||0);if(t<=0)return 9999;var a=Math.floor(this.balance/t);return Math.max(1,a)}},methods:{getChartUrl:function(){this.chartUrl="static/chart-widgets/index.html?stock_id=".concat(this.id,"&interval=").concat(this.selectedInterval,"&theme=").concat(this.themeKey,"&language=").concat(this.language)},setInterval:function(t){this.selectedInterval=t,this.getChartData(),this.getChartUrl()},tabStyle:function(t){var a=this.selectedInterval===t.value;return{background:a?this.theme.primary__500:this.theme.backgroundTertiary,color:a?this.theme.white:this.theme.textPrimary}},getStatistic:function(){var t=this;this.post("/index/get_stock_detail",{stock_id:this.id}).then((function(a){console.log("ðŸš€ ~ getStatistic ~ res:",a),t.stock=a.data,a.data&&void 0!==a.data.balance?t.balance=Number(a.data.balance)||0:a.data&&void 0!==a.data.available_balance?t.balance=Number(a.data.available_balance)||0:a.data&&void 0!==a.data.availableBalance&&(t.balance=Number(a.data.availableBalance)||0)}))},getChartData:function(){this.post("/index/kline",{stock_id:this.id,interval:this.selectedInterval}).then((function(t){console.log("ðŸš€ ~ getChartData ~ res:",t)}))},getPriceColor:function(){var t=Number(this.stock.change_pct||0);return t>=0?this.theme.primary__500:this.theme.success},getMinusStyle:function(){return{background:this.theme.backgroundTertiary,borderRadius:"50%",width:"60rpx",height:"60rpx",display:"flex",alignItems:"center",justifyContent:"center"}},getPlusStyle:function(){return{background:this.theme.primary__500,borderRadius:"50%",width:"60rpx",height:"60rpx",display:"flex",alignItems:"center",justifyContent:"center"}},getActionButtonStyle:function(){return{background:this.theme.backgroundTertiary,padding:"12rpx 24rpx",borderRadius:"8rpx",border:"1px solid ".concat(this.theme.neutral__200),minWidth:"100rpx",textAlign:"center"}},setHalfQuantity:function(){var t=Number(this.stock.price||0);if(!(t<=0)){var a=this.balance/2,e=Math.floor(a/t);this.quantity=Math.max(1,e)}},setFullQuantity:function(){var t=Number(this.stock.price||0);if(!(t<=0)){var a=Math.floor(this.balance/t);this.quantity=Math.max(1,a)}},handleQuantityInput:function(t){var a=t.detail.value||t.target.value;a=String(a).replace(/[^0-9]/g,""),a=Number(a),isNaN(a)||a<1?this.quantity=1:a>this.maxQuantity?this.quantity=this.maxQuantity:this.quantity=Math.floor(a)},handleBuy:function(){var t=this;this.flag&&(!this.quantity||this.quantity<1?this.tos(this.$t("statistic.selectQuantity")||"Please select quantity"):(console.log("Buy:",{id:this.id,num:this.quantity}),this.flag=!1,this.post("/etf/etf_sub",{id:this.id,num:this.quantity}).then((function(a){t.flag=!0,1===a.code?(t.tos(a.msg),setTimeout((function(){t.router.push("/pages/statistic/record")}),1e3)):t.tos(a.msg)}))))}}};a.default=i},e1cb:function(t,a,e){"use strict";e.r(a);var i=e("66da"),n=e("a555");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(s);e("a8b5");var o=e("828b"),l=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"5a4e685a",null,!1,i["a"],void 0);a["default"]=l.exports}}]);