(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-exchange"],{"7b16":function(t,e,a){var r=a("e355");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("967d").default;n("e9f9cdbc",r,!0,{sourceMap:!1,shadowMode:!1})},8527:function(t,e,a){"use strict";a.r(e);var r=a("ed62"),n=a("ebfc");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);a("c1d9");var c=a("828b"),o=Object(c["a"])(n["default"],r["b"],r["c"],!1,null,"1d06f4a2",null,!1,r["a"],void 0);e["default"]=o.exports},c1d9:function(t,e,a){"use strict";var r=a("7b16"),n=a.n(r);n.a},cd30:function(t,e,a){"use strict";a("6a54");var r=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a("fcf3")),i=r(a("9b1b"));a("aa77"),a("bf0f"),a("8f71"),a("c223"),a("e838"),a("fd3c"),a("5c47"),a("a1c1"),a("64aa");var c={name:"Exchange",data:function(){return{currencies:[],exchangeRates:{},fromCurrencyId:null,toCurrencyId:null,inputAmount:"",convertedAmount:0,showCurrencySelector:!1,selectorType:"from",quickAmounts:[25,50,75,100],isRotating:!1}},computed:{theme:function(){return this.$store.getters.theme},fromCurrency:function(){var t=this;return 0===this.currencies.length?{code:"",name:"",symbol:"",flag:"",balance:0}:this.currencies.find((function(e){return e.id===t.fromCurrencyId}))||this.currencies[0]||{code:"",name:"",symbol:"",flag:"",balance:0}},toCurrency:function(){var t=this;return 0===this.currencies.length?{code:"",name:"",symbol:"",flag:"",balance:0}:this.currencies.find((function(e){return e.id===t.toCurrencyId}))||this.currencies[1]||this.currencies[0]||{code:"",name:"",symbol:"",flag:"",balance:0}},availableCurrencies:function(){var t=this;return"from"===this.selectorType?this.currencies.filter((function(e){return e.id!==t.toCurrencyId})):this.currencies.filter((function(e){return e.id!==t.fromCurrencyId}))},exchangeRate:function(){if(!this.fromCurrency||!this.toCurrency)return"1.0000";var t=this.fromCurrency.code,e=this.toCurrency.code,a="".concat(t,"_to_").concat(e),r=this.exchangeRates[a]||1;return parseFloat(r).toFixed(4)},canSubmit:function(){if(!this.fromCurrency)return!1;var t=this.parseNumber(this.inputAmount),e=parseFloat(this.fromCurrency.balance)||0;return t>0&&t<=e}},watch:{fromCurrencyId:function(){this.calculateResult()},toCurrencyId:function(){this.calculateResult()}},onLoad:function(){this.loadWalletData()},onShow:function(){this.loadWalletData()},methods:{openCurrencySelector:function(t){this.selectorType=t,this.showCurrencySelector=!0},selectCurrency:function(t){"from"===this.selectorType?t.id!==this.toCurrencyId&&(this.fromCurrencyId=t.id):t.id!==this.fromCurrencyId&&(this.toCurrencyId=t.id),this.showCurrencySelector=!1},isSelected:function(t){return"from"===this.selectorType?t===this.fromCurrencyId:t===this.toCurrencyId},swapCurrencies:function(){var t=this;if(!this.isRotating){this.isRotating=!0;var e=this.fromCurrencyId;this.fromCurrencyId=this.toCurrencyId,this.toCurrencyId=e,this.inputAmount="",this.convertedAmount=0,setTimeout((function(){t.isRotating=!1}),500)}},calculateResult:function(){var t=this.parseNumber(this.inputAmount);if(t>0){var e=parseFloat(this.exchangeRate);this.convertedAmount=t*e}else this.convertedAmount=0},setQuickAmount:function(t){if(this.fromCurrency){var e=parseFloat(this.fromCurrency.balance)||0,a=(e*t/100).toFixed(2);this.inputAmount=a,this.calculateResult()}},handleSubmit:function(){var t=this;if(this.canSubmit){var e=this.parseNumber(this.inputAmount);this.fromCurrency&&this.toCurrency&&this.fromCurrency.code&&this.toCurrency.code?this.post("/my/exchange_sub",{fromCurrency:this.fromCurrency.code,toCurrency:this.toCurrency.code,amount:e}).then((function(e){1==e.code?(t.tos(e.msg||t.$t("exchange_success")||"Exchange successful"),t.inputAmount="",t.convertedAmount=0,t.loadWalletData(),setTimeout((function(){uni.reLaunch({url:"/pages/my/exchange_history"})}),1500)):t.tos(e.msg||t.$t("exchange_failed")||"Exchange failed")})).catch((function(e){console.error("Exchange error:",e),t.tos(t.$t("exchange_failed")||"Exchange failed")})):this.tos(this.$t("invalid_amount")||"Invalid currency selection")}else this.tos(this.$t("invalid_amount")||"Invalid amount")},loadWalletData:function(){var t=this;this.post("/my/exchange_currency").then((function(e){if(1==e.code){var a=e.data;a.currencies&&Array.isArray(a.currencies)&&(t.currencies=a.currencies.map((function(e){return(0,i.default)((0,i.default)({},e),{},{flag:t.getFlagPath(e.code),balance:parseFloat(e.balance)||0})})),t.currencies.length>0&&(!t.fromCurrencyId&&t.currencies.length>0&&(t.fromCurrencyId=t.currencies[0].id),!t.toCurrencyId&&t.currencies.length>1?t.toCurrencyId=t.currencies[1].id:t.toCurrencyId||1!==t.currencies.length||(t.toCurrencyId=t.currencies[0].id))),a.exchange_rate&&"object"===(0,n.default)(a.exchange_rate)&&(t.exchangeRates=a.exchange_rate),t.inputAmount&&t.calculateResult()}})).catch((function(e){console.error("Failed to load exchange data:",e),uni.showToast({title:t.$t("network_error")||"Failed to load data",icon:"none"})}))},getFlagPath:function(t){return{USD:"/static/locale/logo/usd.png",Euro:"/static/locale/logo/usa.png",USDT:"/static/locale/logo/usdt.png"}[t]||"/static/locale/logo/usa.png"},parseNumber:function(t){if(!t||""===t)return 0;var e=parseFloat(String(t).replace(/,/g,""));return Number.isFinite(e)?e:0},formatNumber:function(t){return t&&0!==t?Number(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},getCardStyle:function(){return{background:this.theme.backgroundCard,borderColor:this.theme.neutral__200}},getSelectorStyle:function(){return{background:this.theme.backgroundTertiary,borderColor:this.theme.neutral__200}},getInputContainerStyle:function(){return{background:this.theme.backgroundTertiary,borderColor:this.theme.neutral__200}},getSwapButtonStyle:function(){return{background:"transparent"}},getQuickAmountStyle:function(){return{background:this.theme.backgroundTertiary,borderColor:this.theme.neutral__200}},getSubmitButtonStyle:function(){return{background:this.canSubmit?this.theme.primary__500:this.theme.neutral__300}},getCurrencyItemStyle:function(t){var e=this.isSelected(t);return{background:e?this.theme.primary__50:this.theme.backgroundTertiary,borderColor:e?this.theme.primary__500:this.theme.neutral__200}}}};e.default=c},e355:function(t,e,a){var r=a("c86c");e=r(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.exchange-page[data-v-1d06f4a2]{min-height:100vh;padding-bottom:%?40?%}.exchange-container[data-v-1d06f4a2]{margin-top:%?20?%;display:flex;flex-direction:column;gap:%?24?%}.rate-display-card[data-v-1d06f4a2]{padding:%?24?% %?32?%;border-radius:%?16?%;border:%?1?% solid;text-align:center}.rate-text[data-v-1d06f4a2]{font-size:%?26?%;font-weight:500}.currency-exchange-wrapper[data-v-1d06f4a2]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:%?24?%}.currency-section[data-v-1d06f4a2]{padding:0;flex:1}.currency-selector[data-v-1d06f4a2]{display:flex;align-items:center;justify-content:space-between;padding:%?16?% %?24?%;border-radius:%?12?%;border:%?1?% solid;margin-bottom:%?16?%;cursor:pointer;transition:all .3s ease}.currency-info[data-v-1d06f4a2]{display:flex;align-items:center;gap:%?16?%;flex:1}.currency-flag[data-v-1d06f4a2]{width:%?60?%;height:%?60?%;border-radius:50%}.currency-details[data-v-1d06f4a2]{display:flex;flex-direction:column;gap:%?4?%}.currency-code[data-v-1d06f4a2]{font-size:%?32?%;font-weight:600}.currency-name[data-v-1d06f4a2]{font-size:%?20?%}.balance-display[data-v-1d06f4a2]{display:flex;flex-direction:column;gap:%?8?%;padding:%?16?% %?24?%;border-radius:%?12?%;border:%?1?% solid;margin-top:%?16?%;background:inherit}.balance-label[data-v-1d06f4a2]{font-size:%?24?%}.balance-amount[data-v-1d06f4a2]{font-size:%?28?%;font-weight:600}.swap-button-container[data-v-1d06f4a2]{display:flex;justify-content:center;align-items:center;position:relative;z-index:1;flex-shrink:0}.swap-button[data-v-1d06f4a2]{width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.swap-button[data-v-1d06f4a2]:active{-webkit-transform:scale(.95);transform:scale(.95)}.swap-button.rotate-animation[data-v-1d06f4a2]{-webkit-animation:rotateCircle-data-v-1d06f4a2 .5s ease-in-out;animation:rotateCircle-data-v-1d06f4a2 .5s ease-in-out}@-webkit-keyframes rotateCircle-data-v-1d06f4a2{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotateCircle-data-v-1d06f4a2{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.swap-icon[data-v-1d06f4a2]{width:100%;height:100%}.amount-section[data-v-1d06f4a2]{padding:%?32?%;border-radius:%?16?%;border:%?1?% solid}.amount-header[data-v-1d06f4a2]{display:flex;align-items:center;justify-content:space-between;margin-bottom:%?20?%}.amount-label[data-v-1d06f4a2]{font-size:%?28?%;font-weight:600}.quick-amount-buttons[data-v-1d06f4a2]{display:flex;gap:%?12?%}.quick-amount-btn[data-v-1d06f4a2]{padding:%?8?% %?16?%;border-radius:%?8?%;border:%?1?% solid;cursor:pointer;transition:all .3s ease}.quick-amount-btn[data-v-1d06f4a2]:active{opacity:.7}.quick-amount-text[data-v-1d06f4a2]{font-size:%?22?%;font-weight:500}.amount-input-container[data-v-1d06f4a2]{display:flex;align-items:center;padding:%?24?%;border-radius:%?12?%;border:%?1?% solid;margin-bottom:%?16?%}.currency-symbol-input[data-v-1d06f4a2]{font-size:%?32?%;font-weight:600;margin-right:%?12?%}.amount-input[data-v-1d06f4a2]{flex:1;font-size:%?32?%;font-weight:600;height:%?48?%;line-height:%?48?%}.input-placeholder[data-v-1d06f4a2]{color:inherit;opacity:.4}.converted-amount[data-v-1d06f4a2]{display:flex;align-items:center;gap:%?8?%}.converted-label[data-v-1d06f4a2]{font-size:%?24?%}.converted-value[data-v-1d06f4a2]{font-size:%?28?%;font-weight:600}.submit-section[data-v-1d06f4a2]{margin-top:%?8?%}.submit-text[data-v-1d06f4a2]{font-size:%?32?%;font-weight:600}.currency-list[data-v-1d06f4a2]{display:flex;flex-direction:column;gap:%?12?%}.currency-item[data-v-1d06f4a2]{display:flex;align-items:center;justify-content:space-between;padding:%?24?%;border-radius:%?12?%;border:%?1?% solid;cursor:pointer;transition:all .3s ease}.currency-item[data-v-1d06f4a2]:active{opacity:.7}.currency-item.selected[data-v-1d06f4a2]{border-width:%?2?%}.currency-item-info[data-v-1d06f4a2]{display:flex;align-items:center;gap:%?16?%;flex:1}.currency-item-flag[data-v-1d06f4a2]{width:%?56?%;height:%?56?%;border-radius:50%}.currency-item-details[data-v-1d06f4a2]{display:flex;flex-direction:column;gap:%?4?%}.currency-item-code[data-v-1d06f4a2]{font-size:%?30?%;font-weight:600}.currency-item-name[data-v-1d06f4a2]{font-size:%?24?%}.currency-item-balance[data-v-1d06f4a2]{font-size:%?22?%;margin-top:%?4?%}.selected-indicator[data-v-1d06f4a2]{display:flex;align-items:center;justify-content:center}',""]),t.exports=e},ebfc:function(t,e,a){"use strict";a.r(e);var r=a("cd30"),n=a.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(i);e["default"]=n.a},ed62:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r}));var r={bgAnimateShape:a("886c").default,appNav:a("61d0").default,vContainer:a("e129").default,uIcon:a("469d").default,uButton:a("ddb1").default,vBottomSheet:a("e75d").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"exchange-page",style:{background:t.theme.backgroundPrimary}},[a("bg-animate-shape"),a("app-nav",{attrs:{blur:!0,title:t.$t("Exhange"),"show-right-image":!0,"right-image-url":"/static/imgs/fund/record.png"},on:{"right-action":function(e){arguments[0]=e=t.$handleEvent(e),t.router.push("/pages/my/exchange_history")}}}),a("v-container",{attrs:{size:"md"}},[a("v-uni-view",{staticClass:"exchange-container"},[a("v-uni-view",{staticClass:"rate-display-card",style:t.getCardStyle()},[a("v-uni-text",{staticClass:"rate-text",style:{color:t.theme.textSecondary}},[t._v(" 1 "+t._s(t.fromCurrency&&t.fromCurrency.code||"---")+" = "+t._s(t.exchangeRate)+" "+t._s(t.toCurrency&&t.toCurrency.code||"---")+" ")])],1),a("v-uni-view",{staticClass:"currency-exchange-wrapper"},[a("v-uni-view",{staticClass:"currency-section"},[a("v-uni-view",{staticClass:"currency-selector",style:t.getSelectorStyle(),on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCurrencySelector("from")}}},[a("v-uni-view",{staticClass:"currency-info"},[a("v-uni-image",{staticClass:"currency-flag",attrs:{src:t.fromCurrency&&t.fromCurrency.flag||"",mode:"aspectFill"}}),a("v-uni-view",{staticClass:"currency-details"},[a("v-uni-text",{staticClass:"currency-code",style:{color:t.theme.textPrimary}},[t._v(t._s(t.fromCurrency&&t.fromCurrency.code||"---"))]),a("v-uni-text",{staticClass:"currency-name",style:{color:t.theme.textTertiary}},[t._v(t._s(t.fromCurrency&&t.fromCurrency.name||"---"))])],1)],1),a("u-icon",{attrs:{name:"arrow-down",color:t.theme.textTertiary,size:"20"}})],1),a("v-uni-view",{staticClass:"balance-display",style:t.getSelectorStyle()},[a("v-uni-text",{staticClass:"balance-label",style:{color:t.theme.textTertiary}},[t._v(t._s(t.$t("balance")||"Balance"))]),a("v-uni-text",{staticClass:"balance-amount",style:{color:t.theme.textPrimary}},[t._v(" "+t._s(t.fromCurrency&&t.fromCurrency.symbol||"$")+" "+t._s(t.formatNumber(t.fromCurrency&&t.fromCurrency.balance||0))+" ")])],1)],1),a("v-uni-view",{staticClass:"swap-button-container"},[a("v-uni-view",{staticClass:"swap-button",class:{"rotate-animation":t.isRotating},style:t.getSwapButtonStyle(),on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.swapCurrencies.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"swap-icon",attrs:{src:"/static/imgs/my/exchange.png",mode:"aspectFit"}})],1)],1),a("v-uni-view",{staticClass:"currency-section"},[a("v-uni-view",{staticClass:"currency-selector",style:t.getSelectorStyle(),on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCurrencySelector("to")}}},[a("v-uni-view",{staticClass:"currency-info"},[a("v-uni-image",{staticClass:"currency-flag",attrs:{src:t.toCurrency&&t.toCurrency.flag||"",mode:"aspectFill"}}),a("v-uni-view",{staticClass:"currency-details"},[a("v-uni-text",{staticClass:"currency-code",style:{color:t.theme.textPrimary}},[t._v(t._s(t.toCurrency&&t.toCurrency.code||"---"))]),a("v-uni-text",{staticClass:"currency-name",style:{color:t.theme.textTertiary}},[t._v(t._s(t.toCurrency&&t.toCurrency.name||"---"))])],1)],1),a("u-icon",{attrs:{name:"arrow-down",color:t.theme.textTertiary,size:"20"}})],1),a("v-uni-view",{staticClass:"balance-display",style:t.getSelectorStyle()},[a("v-uni-text",{staticClass:"balance-label",style:{color:t.theme.textTertiary}},[t._v(t._s(t.$t("balance")||"Balance"))]),a("v-uni-text",{staticClass:"balance-amount",style:{color:t.theme.textPrimary}},[t._v(" "+t._s(t.toCurrency&&t.toCurrency.symbol||"$")+" "+t._s(t.formatNumber(t.toCurrency&&t.toCurrency.balance||0))+" ")])],1)],1)],1),a("v-uni-view",{staticClass:"amount-section",style:t.getCardStyle()},[a("v-uni-view",{staticClass:"amount-header"},[a("v-uni-text",{staticClass:"amount-label",style:{color:t.theme.textPrimary}},[t._v(t._s(t.$t("amount1")||"Amount"))]),a("v-uni-view",{staticClass:"quick-amount-buttons"},t._l(t.quickAmounts,(function(e){return a("v-uni-view",{key:e,staticClass:"quick-amount-btn",style:t.getQuickAmountStyle(),on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.setQuickAmount(e)}}},[a("v-uni-text",{staticClass:"quick-amount-text",style:{color:t.theme.primary__500}},[t._v(t._s(e)+"%")])],1)})),1)],1),a("v-uni-view",{staticClass:"amount-input-container",style:t.getInputContainerStyle()},[a("v-uni-text",{staticClass:"currency-symbol-input",style:{color:t.theme.textPrimary}},[t._v(t._s(t.fromCurrency&&t.fromCurrency.symbol||"$"))]),a("v-uni-input",{staticClass:"amount-input",style:{color:t.theme.textPrimary},attrs:{type:"number",placeholder:t.$t("amount")||"Enter amount","placeholder-class":"input-placeholder"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.calculateResult.apply(void 0,arguments)}},model:{value:t.inputAmount,callback:function(e){t.inputAmount=e},expression:"inputAmount"}})],1),a("v-uni-view",{staticClass:"converted-amount"},[a("v-uni-text",{staticClass:"converted-label",style:{color:t.theme.textTertiary}},[t._v("≈")]),a("v-uni-text",{staticClass:"converted-value",style:{color:t.theme.textPrimary}},[t._v(" "+t._s(t.toCurrency&&t.toCurrency.symbol||"$")+" "+t._s(t.formatNumber(t.convertedAmount))+" ")])],1)],1),a("v-uni-view",{staticClass:"submit-section"},[a("u-button",{style:t.getSubmitButtonStyle(),attrs:{disabled:!t.canSubmit,type:"primary",shape:"circle",size:"large"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSubmit.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"submit-text"},[t._v(t._s(t.$t("Submit")||"Submit"))])],1)],1)],1)],1),a("v-bottom-sheet",{attrs:{title:t.$t("select_currency")||"Select Currency",backgroundColor:t.theme.backgroundCard,textColor:t.theme.textPrimary,closeOnBackdrop:!0},model:{value:t.showCurrencySelector,callback:function(e){t.showCurrencySelector=e},expression:"showCurrencySelector"}},[a("v-uni-view",{staticClass:"currency-list"},t._l(t.availableCurrencies,(function(e){return a("v-uni-view",{key:e.id,staticClass:"currency-item",class:{selected:t.isSelected(e.id)},style:t.getCurrencyItemStyle(e.id),on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.selectCurrency(e)}}},[a("v-uni-view",{staticClass:"currency-item-info"},[a("v-uni-image",{staticClass:"currency-item-flag",attrs:{src:e.flag,mode:"aspectFill"}}),a("v-uni-view",{staticClass:"currency-item-details"},[a("v-uni-text",{staticClass:"currency-item-code",style:{color:t.theme.textPrimary}},[t._v(t._s(e.code))]),a("v-uni-text",{staticClass:"currency-item-name",style:{color:t.theme.textTertiary}},[t._v(t._s(e.name))]),a("v-uni-text",{staticClass:"currency-item-balance",style:{color:t.theme.textSecondary}},[t._v(" "+t._s(t.$t("balance")||"Balance")+": "+t._s(e.symbol||"$")+" "+t._s(t.formatNumber(e.balance||0))+" ")])],1)],1),t.isSelected(e.id)?a("v-uni-view",{staticClass:"selected-indicator"},[a("u-icon",{attrs:{name:"checkmark",color:t.theme.primary__500,size:"24"}})],1):t._e()],1)})),1)],1)],1)},i=[]}}]);